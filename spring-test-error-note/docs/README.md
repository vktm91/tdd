## 테스트의 목적

1. 회귀 버그(regression) 방지
2. 좋은 설계(유연한 설계)로 개선
    - 테스트를 쉽게 만들어준다.
    - 테스트를 결정적이게 만들어준다.

테스트와 설계는 긴밀하게 연결되어 있다. 테스트를 고민하면 설계가 개선되고, 설계를 고민하면 테스트가 쉬워진다.

테스트 코드를 작성하다 보면 테스트가 외부 시스템에 의존하는 상황을 피하라는 신호를 보낸다.

**주의!** 레거시에 테스트를 넣으려면 코드 개선이 필요하다 (레거시 코드에 테스트를 넣는 것은 TDD는 아니다)

### TDD Three Steps

**RED**
1. 깨지는 테스트를 먼저 작성한다. (테스트가 실패 여부를 확인해야 한다.)

**GREEN**
2. 깨지는 테스트를 성공시킨다.

**BLUE**
3. 리팩토링한다. (이전 단계에서 테스트 성공을 확인했기 때문에 파괴적인 리팩토링을 해도 테스트를 돌려보면 된다.)

### TDD 장점과 단점

#### 장점

1. 깨지는 테스트를 먼저 작성해야 하기 때문에, 인터페이스를 먼저 만드는 것이 강제된다. 즉 객체지향의 핵심 원리 중 하나인 행동에 집중하게 된다.
2. 장기적인 관점에서 개발 비용 감소

#### 단점

1. 초기 개발 비용 증가
2. 테스트 코드 작성 난이도에 따른 진입 장벽

### 고민

1. **무의미한 테스트 (Recap)**
    - 너무 명확해서 테스트가 필요 없는 부분에는 꼭 테스트를 작성할 필요가 없을 듯 하다.
    - 중요한 로직을 잘 구분해서 그 부분에 테스트를 넣는 것이 좋다.

2. **느리고 쉽게 깨지는 테스트**
    - 테스트가 많아지는 것과 병렬 처리, H2 연결 등도 고려해야 한다.

3. **테스트가 불가한 코드**
    - 로그인 시점과 같이 기대값 예측 불가능한 경우
